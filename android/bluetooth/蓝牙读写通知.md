
##  准备工作

- 通过string转换UUID   //UUID.fromString(cmdModel.uuid)
- s.getCharacteristic() //获取characteristic实例


````
for (BluetoothGattService s:gatt.getServices()) {
    c = s.getCharacteristic(UUID.fromString(cmdModel.uuid));
    if (c == null) {
        Log.e(Tag,"找不到相关uuid"+cmdModel.uuid + "的characteristic");
        return;
    }
}
````

##  写

普通的写

````  
c.setValue(cmdModel.byteData);
gatt.writeCharacteristic(c);
````


[可靠的写](http://stackoverflow.com/questions/24485536/what-is-reliable-write-in-ble)

````
 gatt.abortReliableWrite(BluetoothDevice mDevice) // api < 19
 gatt.beginReliableWrite(); // api >= 19
 c.setValue(cmdModel.byteData);
 gatt.writeCharacteristic(c);


 @Override
 public void onCharacteristicWrite(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic, int status) {
     super.onCharacteristicWrite(gatt, characteristic, status);

     if(characteristic.getValue() != value) {
         gatt.abortReliableWrite();
     } else {
         gatt.executeReliableWrite();
     }
 }

                
````


##  


